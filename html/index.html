<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MRR Turnouts: QT5 Turnout control using MQTT and a Raspberry Pi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MRR Turnouts
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QT5 <a class="el" href="classTurnout.html">Turnout</a> control using MQTT and a Raspberry Pi </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This project aims to use a Pi and those 8 turnout 5V control boards which interface nicely with the PI. Theoretically, this can control as many turnouts as there are GPIO available (~28, depending). It does not allow for watching the aux outputs for indications, there are not enough GPIO to do that efficiently.</p>
<p>I chose the Pi because it allows me to plug in using ethernet, which is nice, my MRR is going to have a lot of controllers doing things, and if all WiFi, I may overload my local WiFi AP. Being on ethernet means I don't have to worry about that, and I don't have to worry about connectivity issues. Well, I shouldn't anyway.</p>
<p>It's also cheap and everyone who sells add on boards probably also indicates compatibility with the Pi, so you can tell if what you're getting is easy to integrate. See below for the 8 port relay boards I plan to use.</p>
<p>My MRR has 22 switches, a mix of #6 left and right, and some wyes as well. The goal here is to allow me to toggle them individually using MQTT. I want a control board for my N scale 4x8 which is a touch screen on a Pi 4 which can tell me where each train is (using a Pi based current monitor for zones) and, let me make switch decisions manually, but also allow for some remote control. Basically, start a few trains, let them run their routes, and do some switch operations while the auto trains stop nicely when the signals tell them to, if the route is blocked.</p>
<p>More to come, this is just starting, but the code works now, and does what I wanted. Next up, get the current monitor for track segments up and running, and then an interface into JMRI so I can tell it to stop and start trains as needed. I may use DCC++ for this too, but it's a bigger layout, and I still haven't figured out how to do the boosters for it to get power to all the districts.</p>
<p>HW used</p>
<ul>
<li>RPi 3 or 4, you choose. This code isn't very taxing. It's currently tested on a Pi 3.</li>
<li><a href="https://www.amazon.com/gp/product/B00KTELP3I/ref=ppx_yo_dt_b_asin_title_o01_s00?ie=UTF8&psc=1">https://www.amazon.com/gp/product/B00KTELP3I/ref=ppx_yo_dt_b_asin_title_o01_s00?ie=UTF8&amp;psc=1</a></li>
</ul>
<p>That's it. Plug it into the network however you want. See the wiki for a MQTT JSON description of the messaging</p>
<p>Make the project, and copy turnouts.ini into ~/.config/mrr, making that directory as it likely doesn't exist. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
